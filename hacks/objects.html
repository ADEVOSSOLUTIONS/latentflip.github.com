<!DOCTYPE html>  <html> <head>   <title>objects.js</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               objects.js             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>               <h1>Objects in JavaScript</h1>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <h2>Creating objects without constructors</h2>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Creating objects without constructors\n\n&#39;</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>We can create objects without constructors, just POJO (plain old javascript objects).</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>Define an object</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">aProperty</span><span class="o">:</span> <span class="s1">&#39;bar&#39;</span><span class="p">,</span>
  <span class="nx">aMethod</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">val</span><span class="o">*</span><span class="nx">val</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>Assert some things about it. This is exactly as we would expect, and most people are used to.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">)</span>              <span class="c1">//=&gt; { aProperty: &#39;bar&#39;, aMethod =&gt; [Function] }</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">aProperty</span> <span class="p">);</span>   <span class="c1">//=&gt; &#39;bar&#39;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">aMethod</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="p">)</span>   <span class="c1">//=&gt; 4</span></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>This style of object is okay, but it's more like a data-structure than an object.
It's hard to create new instances of our object without cloning it.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <h2>Using a constructor</h2>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Using a constructor\n\n&#39;</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>We can use a constructor function to construct new instances of our "class".</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>My constructor function. There is nothing special about constructor functions, only context. Generally if a function is going to be used as a constructor it is capitalized (but only by convention.
When a function is used as a constructor, <code>this</code> is a new object instance. Here we define properties and methods directly on the object itself inside the constructor.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="kd">function</span> <span class="nx">MyObject</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">aProperty</span> <span class="o">=</span> <span class="s1">&#39;bar&#39;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">aMethod</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">val</span><span class="o">*</span><span class="nx">val</span>
  <span class="p">}</span> <span class="c1">// We don&#39;t need to return anything if it&#39;s being used as a constructor</span>
<span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p>construct a new instance</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MyObject</span><span class="p">();</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">);</span>             <span class="c1">//=&gt; { aProperty: &#39;bar&#39;, aMethod =&gt; [Function] }</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">aProperty</span> <span class="p">);</span>   <span class="c1">//=&gt; &#39;bar&#39;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">aMethod</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="p">);</span>  <span class="c1">//=&gt; 4</span></pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <h3>There is nothing special about constructors</h3>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span> <span class="s1">&#39;There is nothing special about constructors\n\n&#39;</span> <span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <p>A constructor is <em>just</em> a function. It's use "as a constructor" is defined by the use of the <code>new</code> keyword, nothing else. We'll come back to the <code>new</code> keyword ina second, but this means that...</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="kd">function</span> <span class="nx">AnotherObject</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span> <span class="s1">&#39;`this is` &#39;</span><span class="p">,</span> <span class="k">this</span> <span class="p">);</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">foo</span> <span class="o">=</span> <span class="s1">&#39;bar&#39;</span>
<span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <p>Calling with a constructor as normal, creates a new object</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AnotherObject</span><span class="p">()</span>  <span class="c1">// logs &quot;`this` is {}&quot; </span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">foo</span> <span class="p">)</span>           <span class="c1">//=&gt; &#39;bar&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>               <p>We can call a constructor without the <code>new</code> keyword. But then it just runs <em>as a function</em>, and <code>this</code> will be the <code>global</code> object (window in the browser)</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">obj</span> <span class="o">=</span> <span class="nx">AnotherObject</span><span class="p">()</span>         <span class="c1">// logs &quot;`this` is &gt; Window&quot;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">)</span>              <span class="c1">//=&gt; undefined since AnotherMethod() doesn&#39;t return anything</span></pre></div>             </td>           </tr>                               <tr id="section-15">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-15">&#182;</a>               </div>               <h3>Returning from a constructor</h3>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span> <span class="s1">&#39;Returning from a constructor\n\n&#39;</span> <span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-16">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-16">&#182;</a>               </div>               <p>Normally we don't need to explicitly return anything from a constructor. This isn't really magic: inside the constructor <code>this</code> is set, by reference, to our new object, and that object is modified with calls like <code>this.property = 'foo'</code>, so we don't need to return anything. 
The <code>new</code> keyword will ensure that our newly created object is returned, so we can save it off into a variable.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-17">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-17">&#182;</a>               </div>               <h4>But we <em>can</em> if we like explicitly return objects from our constuctor.</h4>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span> <span class="s1">&#39;But we _can_ if we like explicitly return objects from our constuctor\n\n&#39;</span> <span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-18">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-18">&#182;</a>               </div>               <p>If an object is returned from the constructor it will be returned by the new keyword instead of our newly created object</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="kd">function</span> <span class="nx">MyConstructor</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">foo</span> <span class="o">=</span> <span class="s1">&#39;bar&#39;</span><span class="p">;</span> <span class="c1">// this effectively does nothing as we return an explicit object</span>

  <span class="k">return</span> <span class="p">{</span> <span class="nx">foo</span><span class="o">:</span> <span class="s2">&quot;A different object&quot;</span> <span class="p">};</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MyConstructor</span><span class="p">()</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">foo</span> <span class="p">)</span>           <span class="c1">//=&gt; &quot;A different object&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-19">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-19">&#182;</a>               </div>               <h4>If the object returned is a string/number/etc it will <em>not</em> be returned instead</h4>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-20">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-20">&#182;</a>               </div>               <p>So here, the fact we return 10 is ignored.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="kd">function</span> <span class="nx">MyConstructor2</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">foo</span> <span class="o">=</span> <span class="s1">&#39;bar&#39;</span><span class="p">;</span>

  <span class="k">return</span> <span class="mi">10</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MyConstructor2</span><span class="p">()</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">)</span>           <span class="c1">//=&gt; { foo: &#39;bar&#39; } (not 10!)</span></pre></div>             </td>           </tr>                               <tr id="section-21">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-21">&#182;</a>               </div>               <p>This is subtly different though. Here we are returning an <em>object</em> not a literal, so it is returned instead.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="kd">function</span> <span class="nx">MyConstructor3</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">foo</span> <span class="o">=</span> <span class="s1">&#39;bar&#39;</span><span class="p">;</span>

  <span class="k">return</span> <span class="k">new</span> <span class="nb">String</span><span class="p">(</span><span class="s2">&quot;A string object&quot;</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MyConstructor3</span><span class="p">();</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">)</span>          <span class="c1">//=&gt; &gt; String(&quot;A string object&quot;)</span></pre></div>             </td>           </tr>                               <tr id="section-22">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-22">&#182;</a>               </div>               <h2>Prototypes</h2>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Prototypes&#39;</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-23">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-23">&#182;</a>               </div>               <p>When we call a method or look for a property that doesn't exist on an object, JavaScript will also look at the object's [[prototype]], to see the method or property exists there, and so on up the <em>prototype chain</em>.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-24">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-24">&#182;</a>               </div>               <p>In general we <em>cannot</em> access the prototype of an object. But we can modify the prototype of a constructor. (Confusing huh?!).</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-25">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-25">&#182;</a>               </div>               <p>When we construct an object (with the <code>new</code> keyword) the objects <code>[[prototype]]</code> is set to the constructor function's prototype.
We cannot access/modify/set an <em>object's</em> <code>[[prototype]]</code> directly after it has been constructed. "Phew!"</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-26">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-26">&#182;</a>               </div>               <h3>Basic prototype example</h3>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Basic prototype example&#39;</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-27">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-27">&#182;</a>               </div>               <p>Create a constructor function</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="kd">function</span> <span class="nx">Animal</span><span class="p">()</span> <span class="p">{}</span></pre></div>             </td>           </tr>                               <tr id="section-28">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-28">&#182;</a>               </div>               <p>Add some, properties/methods to the constructor function's prototype</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">Animal</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s2">&quot;animal&quot;</span>
<span class="nx">Animal</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">talk</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;I am &quot;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
<span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-29">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-29">&#182;</a>               </div>               <p>Construct a new animal</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">dog</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Animal</span><span class="p">()</span></pre></div>             </td>           </tr>                               <tr id="section-30">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-30">&#182;</a>               </div>               <p>We have an apparently empty object</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">dog</span><span class="p">);</span>     <span class="c1">//=&gt; {}</span></pre></div>             </td>           </tr>                               <tr id="section-31">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-31">&#182;</a>               </div>               <p>Set the <code>name</code> property on the object</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">dog</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s2">&quot;Rover&quot;</span>    
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">dog</span><span class="p">)</span>      <span class="c1">//=&gt; { name: &quot;Rover&quot; }</span></pre></div>             </td>           </tr>                               <tr id="section-32">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-32">&#182;</a>               </div>               <p>Our <code>dog</code> apparently doesn't have a <code>talk()</code> method, but if we call it it still works. This is because the <code>talk()</code> method has been found on  the dog's prototype.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">dog</span><span class="p">.</span><span class="nx">talk</span><span class="p">()</span>            <span class="c1">//=&gt; I am Rover</span></pre></div>             </td>           </tr>                               <tr id="section-33">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-33">&#182;</a>               </div>               <p>In some implementations of JS (node/chrome/firefox/opera) we <em>can</em> lookup/modify an objects prototype directly with the <code>__proto__</code> attribute.
But the douoble underscores, and the lack of cross browser support means that in general we shouldn't.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span> <span class="nx">dog</span> <span class="p">)</span>           <span class="c1">//=&gt; { name: &quot;Rover&quot; }</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span> <span class="nx">dog</span><span class="p">.</span><span class="nx">__proto__</span> <span class="p">)</span> <span class="c1">//=&gt; { name: &quot;animal&quot;, talk: [Function] }</span></pre></div>             </td>           </tr>                               <tr id="section-34">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-34">&#182;</a>               </div>               <h2>The <code>new</code> keyword</h2>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;The `new` keyword\n\n&#39;</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-35">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-35">&#182;</a>               </div>               <p>We have now seen everything we need to, to know how the <code>new</code> keyword works.
It:</p>

<ol>
<li>Creates a new object </li>
<li>Sets the <code>[[prototype]]</code> of the object to the constrctor functions <code>prototype</code></li>
<li>Executes the constructor function with <code>this</code> set to the new object.</li>
</ol>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-36">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-36">&#182;</a>               </div>               <p>This means we could define our own function to replicate the behaviour of <code>new</code>, (note this will only work where <code>__proto__</code> is supported (not i.e)</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="kd">function</span> <span class="nx">myNew</span><span class="p">(</span><span class="nx">constructorFunction</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">newObject</span> <span class="o">=</span> <span class="p">{};</span>
  <span class="nx">newObject</span><span class="p">.</span><span class="nx">__proto__</span> <span class="o">=</span> <span class="nx">constructorFunction</span><span class="p">.</span><span class="nx">prototype</span><span class="p">;</span>
  
  <span class="kd">var</span> <span class="nx">constructorReturned</span> <span class="o">=</span> <span class="nx">constructorFunction</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">newObject</span><span class="p">);</span>
  
  <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">constructorReturned</span> <span class="o">===</span> <span class="s1">&#39;object&#39;</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">constructorReturned</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">newObject</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">Animal</span><span class="p">()</span> <span class="p">{}</span>

<span class="nx">Animal</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s2">&quot;an animal&quot;</span><span class="p">;</span>
<span class="nx">Animal</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">greet</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> 
  <span class="k">return</span> <span class="s2">&quot;Hi I am &quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
<span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-37">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-37">&#182;</a>               </div>               <p>With the normal <code>new</code></p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">dog</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Animal</span><span class="p">();</span>
<span class="nx">dog</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s2">&quot;Rover&quot;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span> <span class="nx">dog</span> <span class="p">);</span>         <span class="c1">//=&gt; { name: &quot;Rover&quot; }</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span> <span class="nx">dog</span><span class="p">.</span><span class="nx">greet</span><span class="p">()</span> <span class="p">);</span> <span class="c1">//=&gt; &quot;Hi I am Rover&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-38">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-38">&#182;</a>               </div>               <p>With my <code>new</code> (won't work on IE)</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">dog</span> <span class="o">=</span> <span class="nx">myNew</span><span class="p">(</span> <span class="nx">Animal</span> <span class="p">);</span>
<span class="nx">dog</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s2">&quot;Rover&quot;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span> <span class="nx">dog</span> <span class="p">);</span>         <span class="c1">//=&gt; { name: &quot;Rover&quot; }</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span> <span class="nx">dog</span><span class="p">.</span><span class="nx">greet</span><span class="p">()</span> <span class="p">);</span> <span class="c1">//=&gt; &quot;Hi I am Rover&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-39">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-39">&#182;</a>               </div>               <h2>So when/where/why prototypes?</h2>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;So when/where/why prototypes?\n\n&#39;</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-40">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-40">&#182;</a>               </div>               <h3>Prototypes let us mimic inheritance chains like in a regular OO language.</h3>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Prototypes let us mimic inheritance chains like in a regular OO language.\n\n&#39;</span><span class="p">);</span>

<span class="kd">function</span> <span class="nx">Animal</span><span class="p">()</span> <span class="p">{}</span>
<span class="nx">Animal</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">legs</span> <span class="o">=</span> <span class="kc">null</span>
<span class="nx">Animal</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">greet</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Hi I have &quot;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">legs</span><span class="p">,</span> <span class="s2">&quot;legs&quot;</span><span class="p">)</span> <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-41">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-41">&#182;</a>               </div>               <p>Note here, that we are setting the prototype to an <em>instance</em> of an animal. Prototypes are <em>just objects</em>. Nothing more, nothing less.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="kd">function</span> <span class="nx">Dog</span><span class="p">()</span> <span class="p">{}</span>
<span class="nx">Dog</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Animal</span><span class="p">();</span>
<span class="nx">Dog</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">legs</span> <span class="o">=</span> <span class="mi">4</span>
<span class="nx">Dog</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">breed</span> <span class="o">=</span> <span class="kc">null</span>

<span class="kd">function</span> <span class="nx">Retriever</span><span class="p">()</span> <span class="p">{}</span>
<span class="nx">Retriever</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Dog</span><span class="p">();</span>
<span class="nx">Retriever</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">breed</span> <span class="o">=</span> <span class="s2">&quot;Retriever&quot;</span>

<span class="nx">myDog</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Retriever</span><span class="p">();</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span> <span class="nx">myDog</span><span class="p">.</span><span class="nx">breed</span> <span class="p">);</span>   <span class="c1">//=&gt; &quot;Retriever&quot;</span>
<span class="nx">myDog</span><span class="p">.</span><span class="nx">greet</span><span class="p">()</span>                 <span class="c1">//=&gt; logs &quot;Hi I have 4 legs&quot;</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 